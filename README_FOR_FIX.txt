# 简谐运动教学仿真系统 - 闪退问题修复

## 问题描述

1. 应用程序打包后出现闪退问题
2. 相位差合成模式中，界面显示频率比ω1:ω2为1:1，但实际运行中频率不一致

## 修复内容

我们进行了以下修复：

1. **样式表解析错误**
   - 简化了多个UI元素的样式表，将多行样式转换为单行
   - 移除了一些可能导致解析错误的CSS属性

2. **频率参数初始化**
   - 确保omega2初始值固定为1.0
   - 默认频率比设置为'1:1'

3. **窗口引用问题**
   - 添加全局变量保存窗口引用，防止窗口被垃圾回收
   - 确保在适当位置调用show()和exec()方法

4. **异常处理改进**
   - 添加更全面的错误日志记录
   - 增强异常捕获和提示机制

## 修复文件

以下文件进行了修改：

- `launcher.py`: 改进启动流程和事件循环处理
- `phase_main.py`: 简化样式表，优化图例位置
- `ui_framework.py`: 修复频率参数，增强Matplotlib后端兼容性
- `shm_app_release.spec`: 优化打包配置，确保包含必要依赖

## 使用说明

1. 使用修复后的命令重新打包：
   ```
   pyinstaller --clean shm_app_release.spec
   ```

2. 运行生成的可执行文件：
   ```
   dist/简谐运动教学仿真系统/简谐运动教学仿真系统.exe
   ```

3. 如遇问题，可检查logs目录中的日志获取详细信息

## 调试工具

我们提供了`debug_launcher.py`用于调试，可通过以下命令启动：
```
python debug_launcher.py
```

修复完成后，程序应该可以正常运行，三种模式（李萨如图形、拍现象和相位差合成）都能正确展示并不再闪退。 
# 李萨如图形模块L型布局修改说明

## 修改概述

本次修改将垂直简谐运动模块（李萨如图形）的界面布局从原来的左右分布改为L型布局，以增强教学效果和视觉对应关系。

## 主要修改内容

### 1. 布局结构变更

**原布局**：
```
[控制面板] | [X波形]  [李萨如图形]
           | [Y波形]
```

**新L型布局**：
```
[控制面板] | [Y波形] [李萨如图形]
           | [空白]  [X波形]
```

### 2. 文件修改详情

#### `shm_visualization/orthogonal_main.py`

**导入语句修改**：
- 添加了 `QGridLayout` 和 `QVBoxLayout` 导入

**`setup_ui()` 方法重构**：
- 使用 `QGridLayout` 替代原来的嵌套分隔器布局
- 创建2x2网格布局：
  - (0,0): Y方向波形面板（垂直显示）
  - (0,1): 李萨如图形面板
  - (1,0): 空白占位符
  - (1,1): X方向波形面板（水平显示）
- 设置行列拉伸比例：上行占2/3，下行占1/3；左列占1/3，右列占2/3

**Y方向波形面板修改**：
- 坐标轴旋转90度：X轴表示Y振幅(-1.2到1.2)，Y轴表示时间(-5到5)
- 时间轴中心线改为水平线(y=0)
- 标签更新为"Y振幅"和"时间(s)"

**`update_plots()` 方法重构**：
- Y波形绘制：使用 `plot(y_data, new_t)` 实现90度旋转
- Y波形当前点：使用 `scatter([y_at_zero], [0])` 在时间轴上显示
- 添加辅助线显示对应关系

### 3. 坐标轴对齐和视觉对应

#### 坐标范围统一
- 李萨如图形：X轴(-1.2, 1.2)，Y轴(-1.2, 1.2)
- X波形图：Y轴(-1.2, 1.2) **与李萨如图形X轴对齐**
- Y波形图：X轴(-1.2, 1.2) **与李萨如图形Y轴对齐**
- 时间轴：统一为(-5, 5)范围

#### 视觉对应关系增强
1. **投影线系统**：
   - 李萨如图形中的垂直虚线延伸到X波形图
   - 李萨如图形中的水平虚线延伸到Y波形图
   - 波形图中的辅助线指示当前振幅值

2. **当前点指示器**：
   - 所有图形中的当前点使用相同颜色和大小
   - X波形图：在时间轴(x=0)处显示当前X振幅
   - Y波形图：在时间轴(y=0)处显示当前Y振幅
   - 李萨如图形：显示合成位置点

3. **辅助线系统**：
   - X波形图：水平虚线表示当前X振幅值
   - Y波形图：垂直虚线表示当前Y振幅值
   - 李萨如图形：十字投影线连接到对应波形图

## 教学效果提升

### 1. 空间对应关系
- Y波形图位于李萨如图形左侧，直观显示Y坐标的时间变化
- X波形图位于李萨如图形下方，直观显示X坐标的时间变化
- 学生可以清楚看到二维轨迹是如何由两个一维振动合成的

### 2. 坐标轴对齐
- Y波形的振幅轴与李萨如图形的Y轴完全对齐
- X波形的振幅轴与李萨如图形的X轴完全对齐
- 网格线和刻度标记保持一致

### 3. 实时对应关系
- 当李萨如图形上的点移动时，学生可以同时看到：
  - 该点的X坐标对应X波形图上的当前值
  - 该点的Y坐标对应Y波形图上的当前值
  - 辅助线清楚地显示这种对应关系

## 技术实现特点

### 1. 响应式布局
- 使用QGridLayout确保在不同窗口大小下都能正常显示
- 行列拉伸比例设置保证主要图形有足够显示空间

### 2. 性能优化
- 保持原有的动画性能和参数控制功能
- 不影响现有的频率比控制和实时参数调整

### 3. 兼容性
- 保持与原有控制面板的完全兼容
- 所有原有功能（播放、暂停、重置、参数调整）正常工作

## 使用方法

1. 运行测试脚本：
   ```bash
   python test_l_layout.py
   ```

2. 或直接运行模块：
   ```bash
   python shm_visualization/orthogonal_main.py
   ```

3. 观察新布局的特点：
   - 调整参数观察三个图形的同步变化
   - 注意辅助线如何显示对应关系
   - 体验更直观的教学效果

## 预期教学效果

学生通过新的L型布局可以更好地理解：
1. 李萨如图形是两个垂直简谐振动的参数组合
2. x(t)和y(t)如何在时间上组合成二维轨迹
3. 频率比和相位差如何影响最终图形形状
4. 简谐运动合成的基本原理和数学关系
